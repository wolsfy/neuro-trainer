<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–µ–π—Ä–æ-–¢—Ä–µ–Ω–µ—Ä</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="apple-touch-icon" href="https://img.icons8.com/color/180/brain--v1.png">
    <link rel="icon" type="image/png" href="https://img.icons8.com/color/96/brain--v1.png">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        .level-display{position:fixed;top:10px;right:10px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:12px 20px;border-radius:16px;box-shadow:0 4px 16px rgba(102,126,234,0.4);z-index:1000;min-width:120px;cursor:pointer;transition:transform 0.2s}.level-display:hover{transform:scale(1.05)}.level-number{font-size:1.8rem;font-weight:900;text-align:center;display:block}.level-title{font-size:0.9rem;text-align:center;opacity:0.9;display:block;margin-top:2px}.xp-bar-container{width:100%;height:6px;background:rgba(255,255,255,0.3);border-radius:3px;margin-top:8px;overflow:hidden}.xp-bar-fill{height:100%;background:white;border-radius:3px;transition:width 0.5s ease}.xp-text{font-size:0.7rem;text-align:center;margin-top:4px;opacity:0.85}
        .energy-display{position:fixed;top:10px;left:10px;background:linear-gradient(135deg,#4CAF50,#45a049);color:white;padding:12px 20px;border-radius:16px;box-shadow:0 4px 16px rgba(76,175,80,0.4);z-index:1000;min-width:120px;cursor:pointer;transition:transform 0.2s}.energy-display:hover{transform:scale(1.05)}.energy-value{font-size:1.8rem;font-weight:900;text-align:center;display:block}.energy-label{font-size:0.9rem;text-align:center;opacity:0.9;display:block;margin-top:2px}.energy-bar-container{width:100%;height:6px;background:rgba(255,255,255,0.3);border-radius:3px;margin-top:8px;overflow:hidden}.energy-bar-fill{height:100%;background:white;border-radius:3px;transition:width 0.5s ease}.energy-time{font-size:0.7rem;text-align:center;margin-top:4px;opacity:0.85;display:none}
        .cheat-button{position:fixed;bottom:10px;left:10px;width:50px;height:50px;background:rgba(255,215,0,0.3);border:2px dashed rgba(255,215,0,0.5);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;cursor:pointer;z-index:999;transition:all 0.3s}.cheat-button:hover{background:rgba(255,215,0,0.6);transform:scale(1.1)}.cheat-button:active{transform:scale(0.9)}
        .main-menu-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;padding:20px;max-width:500px;margin:0 auto}.category-card{background:white;border-radius:20px;padding:30px 20px;box-shadow:0 6px 16px rgba(0,0,0,0.1);cursor:pointer;transition:all 0.3s;text-decoration:none;color:inherit;display:flex;flex-direction:column;align-items:center;position:relative;min-height:140px}.category-card:hover{transform:translateY(-8px);box-shadow:0 12px 24px rgba(0,0,0,0.15)}.category-card:active{transform:translateY(-4px)}.category-icon{font-size:3.5rem;margin-bottom:12px}.category-name{font-size:1.2rem;font-weight:bold;color:#333;text-align:center;margin-bottom:5px}.category-desc{font-size:0.85rem;color:#777;text-align:center;line-height:1.3}.badge{position:absolute;top:10px;right:10px;background:#FF5252;color:white;padding:4px 8px;border-radius:12px;font-size:0.75rem;font-weight:bold;min-width:20px;text-align:center}.category-card.featured{background:linear-gradient(135deg,#667eea,#764ba2);color:white}.category-card.featured .category-name,.category-card.featured .category-desc{color:white}
    </style>
    <script src="js/level-system.js"></script>
    <script src="js/energy-system.js"></script>
    <script src="js/daily-quests.js"></script>
    <script src="js/quest-tracker.js"></script>
</head>
<body>
    <div class="energy-display" onclick="showEnergyInfo()">
        <span class="energy-value" id="energy-value">100</span>
        <span class="energy-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
        <div class="energy-bar-container"><div class="energy-bar-fill" id="energy-bar-fill"></div></div>
        <div class="energy-time" id="energy-time"></div>
    </div>
    <div class="level-display" onclick="showLevelInfo()">
        <span class="level-number" id="level-num">1</span>
        <span class="level-title" id="level-title">üå± –ù–æ–≤–∏—á–æ–∫</span>
        <div class="xp-bar-container"><div class="xp-bar-fill" id="xp-bar"></div></div>
        <div class="xp-text" id="xp-text">0 / 100 XP</div>
    </div>

    <div class="screen active">
        <div class="profile-bar">
            <div class="profile-info"><span class="profile-name">–ú–æ–π –±–∞–ª–∞–Ω—Å:</span><span class="coin-balance"><span id="user-coins">0</span> üí∞</span></div>
        </div>
        <div class="character-area">
            <div class="mascot-container"><a href="room.html" style="display: block;"><img id="mascot-img" src="mascot.png" alt="–ù–∞—à –†–æ–±–æ—Ç" class="mascot-img"></a><div class="mascot-speech">–ü—Ä–∏–≤–µ—Ç! –í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é!</div></div>
        </div>
        <div class="main-menu-grid">
            <a href="games-menu.html" class="category-card featured">
                <div class="category-icon">üéÆ</div>
                <div class="category-name">–ò–≥—Ä—ã</div>
                <div class="category-desc">6 –∏–≥—Ä –¥–ª—è –º–æ–∑–≥–∞</div>
            </a>
            
            <a href="quests.html" class="category-card">
                <span class="badge" id="quests-badge" style="display:none">!</span>
                <div class="category-icon">üéØ</div>
                <div class="category-name">–ó–∞–¥–∞–Ω–∏—è</div>
                <div class="category-desc">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</div>
            </a>
            
            <a href="stats.html" class="category-card">
                <div class="category-icon">üìä</div>
                <div class="category-name">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="category-desc">–¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
            </a>
            
            <a href="achievements.html" class="category-card">
                <span class="badge" id="achievements-badge" style="display:none">0</span>
                <div class="category-icon">üèÜ</div>
                <div class="category-name">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                <div class="category-desc">–¢–≤–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã</div>
            </a>
            
            <a href="shop.html" class="category-card">
                <div class="category-icon">üõçÔ∏è</div>
                <div class="category-name">–ú–∞–≥–∞–∑–∏–Ω</div>
                <div class="category-desc">–û–¥–µ–∂–¥–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è</div>
            </a>
            
            <a href="room.html" class="category-card">
                <div class="category-icon">üè†</div>
                <div class="category-name">–ö–æ–º–Ω–∞—Ç–∞</div>
                <div class="category-desc">–î–æ–º —Ä–æ–±–æ—Ç–∞</div>
            </a>
        </div>
        <div class="footer">–í–µ—Ä—Å–∏—è 7.0 (New Navigation)</div>
    </div>

    <div class="cheat-button" onclick="addCheatCoins()" title="–ß–∏—Ç-–∫–æ–¥: +1000 –º–æ–Ω–µ—Ç">üí∞</div>

    <script>
        let coins=parseInt(localStorage.getItem('neuroCoins'))||0;updateCoinsDisplay();const savedClothes=localStorage.getItem('neuroClothes')||'clothes-none',clothesMap={'clothes-none':'mascot.png','clothes-tshirt':'robot-tshirt.png','clothes-hoodie':'robot-hoodie.png','clothes-jacket':'robot-jacket.png','clothes-suit':'robot-suit.png'},robotImage=clothesMap[savedClothes]||'mascot.png';document.getElementById('mascot-img').src=robotImage;const savedTheme=localStorage.getItem('neuroTheme');if(savedTheme)document.body.className=savedTheme;
        function updateCoinsDisplay(){coins=parseInt(localStorage.getItem('neuroCoins'))||0;document.getElementById('user-coins').innerText=coins}
        function updateLevelDisplay(){const p=window.levelSystem.getProgress(),t=window.levelSystem.getCurrentTitle();document.getElementById('level-num').innerText=p.level;document.getElementById('level-title').innerText=`${t.icon} ${t.name}`;document.getElementById('xp-bar').style.width=p.percentage+'%';document.getElementById('xp-text').innerText=`${p.xp} / ${p.xpNeeded} XP`}
        function showLevelInfo(){const p=window.levelSystem.getProgress(),t=window.levelSystem.getCurrentTitle(),n=window.levelSystem.getNextTitle();let msg=`üéÆ –£—Ä–æ–≤–µ–Ω—å: ${p.level}\n${t.icon} ${t.name}\n\n‚ú® XP: ${p.xp} / ${p.xpNeeded}\nüìä –ü—Ä–æ–≥—Ä–µ—Å—Å: ${p.percentage}%`;if(n)msg+=`\n\nüéØ –°–ª–µ–¥—É—é—â–∏–π —Ç–∏—Ç—É–ª:\n${n.icon} ${n.name} (—É—Ä. ${n.level})`;alert(msg)}
        function showEnergyInfo(){const e=window.energySystem.getEnergy(),t=window.energySystem.getTimeToNextRegen();let msg=`‚ö° –≠–Ω–µ—Ä–≥–∏—è: ${e}/${window.ENERGY_CONFIG.maxEnergy}\n\nüîÑ –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: +1 –∫–∞–∂–¥—ã–µ ${window.ENERGY_CONFIG.regenMinutes} –º–∏–Ω`;if(t)msg+=`\n‚è∞ +1 —á–µ—Ä–µ–∑ ${t.minutes}:${t.seconds.toString().padStart(2,'0')}`;msg+=`\n\nüí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: ${window.ENERGY_CONFIG.refillCost} –º–æ–Ω–µ—Ç`;if(confirm(msg+'\n\n–ü–æ–ø–æ–ª–Ω–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é?')){if(window.energySystem.refillEnergy()){alert('‚úÖ –≠–Ω–µ—Ä–≥–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∞!');updateCoinsDisplay();window.energySystem.updateDisplay()}else{alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!')}}}
        function addCheatCoins(){coins+=1000;localStorage.setItem('neuroCoins',coins);updateCoinsDisplay();const c=document.getElementById('user-coins');c.classList.add('coin-anim');setTimeout(()=>c.classList.remove('coin-anim'),300);showCheatNotification()}
        function showCheatNotification(){const n=document.createElement('div');n.style.cssText='position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:linear-gradient(135deg,#FFD700,#FFA500);color:white;padding:20px 40px;border-radius:16px;font-size:1.5rem;font-weight:bold;box-shadow:0 8px 24px rgba(255,215,0,0.5);z-index:1000;animation:popIn 0.3s';n.innerText='+1000 üí∞';document.body.appendChild(n);setTimeout(()=>{n.style.opacity='0';n.style.transform='translate(-50%, -50%) scale(1.5)';n.style.transition='all 0.3s';setTimeout(()=>n.remove(),300)},1000)}
        function updateBadges(){if(window.dailyQuests){const all=window.dailyQuests.getAllCompleted();if(!all){document.getElementById('quests-badge').style.display='block'}}}
        updateLevelDisplay();window.energySystem.updateDisplay();updateBadges();setInterval(()=>window.energySystem.updateDisplay(),1000);
    </script>
</body>
</html>
