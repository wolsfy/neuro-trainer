<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–µ–π—Ä–æ-–¢—Ä–µ–Ω–µ—Ä</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="apple-touch-icon" href="https://img.icons8.com/color/180/brain--v1.png">
    <link rel="icon" type="image/png" href="https://img.icons8.com/color/96/brain--v1.png">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        .level-display {
            position: fixed;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 20px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
            z-index: 1000;
            min-width: 120px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .level-display:hover {
            transform: scale(1.05);
        }
        .level-number {
            font-size: 1.8rem;
            font-weight: 900;
            text-align: center;
            display: block;
        }
        .level-title {
            font-size: 0.9rem;
            text-align: center;
            opacity: 0.9;
            display: block;
            margin-top: 2px;
        }
        .xp-bar-container {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        .xp-bar-fill {
            height: 100%;
            background: white;
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        .xp-text {
            font-size: 0.7rem;
            text-align: center;
            margin-top: 4px;
            opacity: 0.85;
        }
        .cheat-button { position: fixed; bottom: 10px; left: 10px; width: 50px; height: 50px; background: rgba(255, 215, 0, 0.3); border: 2px dashed rgba(255, 215, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 999; transition: all 0.3s; }
        .cheat-button:hover { background: rgba(255, 215, 0, 0.6); transform: scale(1.1); }
        .cheat-button:active { transform: scale(0.9); }
        .achievements-button { position: fixed; bottom: 70px; left: 10px; width: 50px; height: 50px; background: linear-gradient(135deg, #FFD700, #FFA500); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 999; transition: all 0.3s; box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4); text-decoration: none; }
        .achievements-button:hover { transform: scale(1.1) rotate(10deg); box-shadow: 0 6px 16px rgba(255, 215, 0, 0.6); }
        .achievements-button:active { transform: scale(0.95); }
        .stats-button { position: fixed; bottom: 130px; left: 10px; width: 50px; height: 50px; background: linear-gradient(135deg, #2196F3, #1976D2); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 999; transition: all 0.3s; box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4); text-decoration: none; }
        .stats-button:hover { transform: scale(1.1); box-shadow: 0 6px 16px rgba(33, 150, 243, 0.6); }
        .stats-button:active { transform: scale(0.95); }
    </style>
    <script src="js/level-system.js"></script>
</head>
<body>
    <div class="level-display" onclick="showLevelInfo()">
        <span class="level-number" id="level-num">1</span>
        <span class="level-title" id="level-title">üå± –ù–æ–≤–∏—á–æ–∫</span>
        <div class="xp-bar-container">
            <div class="xp-bar-fill" id="xp-bar"></div>
        </div>
        <div class="xp-text" id="xp-text">0 / 100 XP</div>
    </div>

    <div class="screen active">
        <div class="profile-bar">
            <div class="profile-info">
                <span class="profile-name">–ú–æ–π –±–∞–ª–∞–Ω—Å:</span>
                <span class="coin-balance"><span id="user-coins">0</span> üí∞</span>
            </div>
            <a href="shop.html" class="shop-link-btn">üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω</a>
        </div>

        <div class="character-area">
            <div class="mascot-container">
                <a href="room.html" style="display: block;">
                    <img id="mascot-img" src="mascot.png" alt="–ù–∞—à –†–æ–±–æ—Ç" class="mascot-img">
                </a>
                <div class="mascot-speech">–ü—Ä–∏–≤–µ—Ç! –ñ–º–∏ –Ω–∞ –º–µ–Ω—è!</div>
            </div>
        </div>
        
        <div class="menu-grid">
            <a href="games/schulte.html" class="menu-btn"><span class="menu-icon">üî¢</span><span>–®—É–ª—å—Ç–µ</span></a>
            <a href="games/decoder.html" class="menu-btn"><span class="menu-icon">üß©</span><span>–®–∏—Ñ—Ä</span></a>
            <a href="games/memory.html" class="menu-btn"><span class="menu-icon">üí°</span><span>–ü–∞–º—è—Ç—å</span></a>
            <a href="games/stroop.html" class="menu-btn"><span class="menu-icon">üé®</span><span>–¶–≤–µ—Ç–∞</span></a>
            <a href="games/math.html" class="menu-btn"><span class="menu-icon">üßÆ</span><span>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</span></a>
        </div>

        <div class="footer">–í–µ—Ä—Å–∏—è 5.0 (Level System)</div>
    </div>

    <a href="stats.html" class="stats-button" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">üìä</a>
    <a href="achievements.html" class="achievements-button" title="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">üèÜ</a>
    <div class="cheat-button" onclick="addCheatCoins()" title="–ß–∏—Ç-–∫–æ–¥: +1000 –º–æ–Ω–µ—Ç">üí∞</div>

    <script>
        let coins = parseInt(localStorage.getItem('neuroCoins')) || 0;
        updateCoinsDisplay();

        const savedClothes = localStorage.getItem('neuroClothes') || 'clothes-none';
        const clothesMap = {'clothes-none': 'mascot.png', 'clothes-tshirt': 'robot-tshirt.png', 'clothes-hoodie': 'robot-hoodie.png', 'clothes-jacket': 'robot-jacket.png', 'clothes-suit': 'robot-suit.png'};
        const robotImage = clothesMap[savedClothes] || 'mascot.png';
        document.getElementById('mascot-img').src = robotImage;

        const savedTheme = localStorage.getItem('neuroTheme');
        if(savedTheme) document.body.className = savedTheme;

        function updateCoinsDisplay() { document.getElementById('user-coins').innerText = coins; }

        function updateLevelDisplay() {
            const progress = window.levelSystem.getProgress();
            const title = window.levelSystem.getCurrentTitle();
            document.getElementById('level-num').innerText = progress.level;
            document.getElementById('level-title').innerText = `${title.icon} ${title.name}`;
            document.getElementById('xp-bar').style.width = progress.percentage + '%';
            document.getElementById('xp-text').innerText = `${progress.xp} / ${progress.xpNeeded} XP`;
        }

        function showLevelInfo() {
            const progress = window.levelSystem.getProgress();
            const title = window.levelSystem.getCurrentTitle();
            const nextTitle = window.levelSystem.getNextTitle();
            let msg = `üéÆ –£—Ä–æ–≤–µ–Ω—å: ${progress.level}\n${title.icon} ${title.name}\n\n‚ú® XP: ${progress.xp} / ${progress.xpNeeded}\nüìä –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress.percentage}%`;
            if (nextTitle) msg += `\n\nüéØ –°–ª–µ–¥—É—é—â–∏–π —Ç–∏—Ç—É–ª:\n${nextTitle.icon} ${nextTitle.name} (—É—Ä. ${nextTitle.level})`;
            alert(msg);
        }

        function addCheatCoins() {
            coins += 1000;
            localStorage.setItem('neuroCoins', coins);
            updateCoinsDisplay();
            const coinsEl = document.getElementById('user-coins');
            coinsEl.classList.add('coin-anim');
            setTimeout(() => coinsEl.classList.remove('coin-anim'), 300);
            showCheatNotification();
        }

        function showCheatNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, #FFD700, #FFA500); color: white; padding: 20px 40px; border-radius: 16px; font-size: 1.5rem; font-weight: bold; box-shadow: 0 8px 24px rgba(255, 215, 0, 0.5); z-index: 1000; animation: popIn 0.3s;';
            notification.innerText = '+1000 üí∞';
            document.body.appendChild(notification);
            setTimeout(() => { notification.style.opacity = '0'; notification.style.transform = 'translate(-50%, -50%) scale(1.5)'; notification.style.transition = 'all 0.3s'; setTimeout(() => notification.remove(), 300); }, 1000);
        }

        updateLevelDisplay();
    </script>
</body>
</html>
