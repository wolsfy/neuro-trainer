<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–æ–º–Ω–∞—Ç–∞ –ù–µ–π—Ä–æ–Ω–∞</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* –ö–æ–º–Ω–∞—Ç–∞ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
        .room-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            background: radial-gradient(circle at center, #fff, var(--bg)); /* –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è */
        }

        /* –ë–æ–ª—å—à–æ–π —Ä–æ–±–æ—Ç */
        .big-robot-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            position: relative;
        }

        .big-robot-img {
            width: 80%; /* –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π! */
            max-width: 400px;
            height: auto;
            filter: drop-shadow(0 20px 30px rgba(0,0,0,0.2)); /* –ì–ª—É–±–æ–∫–∞—è —Ç–µ–Ω—å */
            transition: transform 0.2s;
            cursor: pointer;
            
            /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞—Ä–µ–Ω–∏—è */
            animation: floatBig 4s ease-in-out infinite;
        }
        
        @keyframes floatBig {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞ (—Å–∂–∞—Ç–∏–µ) */
        .big-robot-img:active {
            transform: scale(0.95) translateY(0) !important;
            transition: 0.1s;
        }

        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤–Ω–∏–∑—É) */
        .room-controls {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .room-btn {
            background: white;
            border: none;
            padding: 20px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--text);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .room-btn:active { transform: scale(0.98); }

        .btn-icon { font-size: 2rem; }

        /* –û–±–ª–∞—á–∫–æ –º—ã—Å–ª–µ–π */
        .thought-bubble {
            position: absolute;
            top: 10%;
            right: 10%;
            background: white;
            padding: 15px 25px;
            border-radius: 30px;
            border-bottom-left-radius: 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            font-weight: bold;
            color: #555;
            animation: popIn 0.5s forwards;
            max-width: 150px;
            text-align: center;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div class="top-bar">
        <a href="index.html" class="btn-back">üè†</a>
        <div class="game-info">–ö–æ–º–Ω–∞—Ç–∞</div>
        <div class="balance-badge" style="font-size:1rem;"><span id="coins">0</span> üí∞</div>
    </div>

    <div class="room-screen">
        
        <!-- –†–æ–±–æ—Ç -->
        <div class="big-robot-container">
            <div class="thought-bubble" id="bubble">–Ø —Ö–æ—á—É —É—á–∏—Ç—å—Å—è!</div>
            <img id="robot-img" src="mascot.png" class="big-robot-img" onclick="pokeRobot()">
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="room-controls">
            <button class="room-btn" onclick="window.location.href='shop.html'">
                <span class="btn-icon">üëï</span>
                <span>–ì–∞—Ä–¥–µ—Ä–æ–±</span>
            </button>
            <button class="room-btn" onclick="feedRobot()">
                <span class="btn-icon">‚ö°</span>
                <span>–ó–∞—Ä—è–¥–∏—Ç—å</span>
            </button>
        </div>

    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        const coins = parseInt(localStorage.getItem('neuroCoins')) || 0;
        document.getElementById('coins').innerText = coins;

        const skin = localStorage.getItem('neuroSkin') || 'mascot.png';
        document.getElementById('robot-img').src = skin;

        // –ó–≤—É–∫
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            
            if (type === 'poke') {
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
                osc.start(); osc.stop(audioCtx.currentTime + 0.2);
            }
        }

        // –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
        const PHRASES = [
            "–ü—Ä–∏–≤–µ—Ç!", "–ö–∞–∫ –¥–µ–ª–∞?", "–ü–æ–∏–≥—Ä–∞–µ–º?", "–Ø —É–º–Ω—ã–π!", "–ë–∑–∑-–±–∑–∑...", "–•–æ—á—É –º–æ–Ω–µ—Ç–∫–∏!", "–¢—ã —Å—É–ø–µ—Ä!"
        ];

        function pokeRobot() {
            playSound('poke');
            
            // –°–ª—É—á–∞–π–Ω–∞—è —Ñ—Ä–∞–∑–∞
            const text = PHRASES[Math.floor(Math.random() * PHRASES.length)];
            const bubble = document.getElementById('bubble');
            bubble.innerText = text;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
            bubble.style.animation = 'none';
            bubble.offsetHeight; /* trigger reflow */
            bubble.style.animation = 'popIn 0.3s forwards';
            
            confetti({ particleCount: 5, spread: 30, origin: { y: 0.5 } });
        }

        function feedRobot() {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π –º–µ—Ö–∞–Ω–∏–∫–∏
            alert("–ù—è–º-–Ω—è–º! –°–ø–∞—Å–∏–±–æ –∑–∞ —ç–Ω–µ—Ä–≥–∏—é (—Å–∫–æ—Ä–æ —ç—Ç–æ –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å –º–æ–Ω–µ—Ç).");
            pokeRobot();
        }

        document.body.addEventListener('click', () => { if (audioCtx.state === 'suspended') audioCtx.resume(); }, { once: true });
    </script>
</body>
</html>
