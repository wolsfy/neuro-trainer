<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile.css?v=6">
    <style>
        .settings-container { padding: 20px 15px 80px 15px; max-width: 600px; margin: 0 auto; }
        .settings-section { background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .settings-section h2 { margin: 0 0 15px 0; font-size: 1.3rem; color: #333; display: flex; align-items: center; gap: 10px; }
        .setting-item { padding: 15px 0; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; }
        .setting-item:last-child { border-bottom: none; }
        .setting-label { font-size: 1rem; color: #555; flex: 1; }
        .setting-label small { display: block; color: #999; font-size: 0.85rem; margin-top: 4px; }
        .toggle-switch { position: relative; width: 50px; height: 28px; background: #ccc; border-radius: 14px; cursor: pointer; transition: background 0.3s; }
        .toggle-switch.active { background: var(--primary); }
        .toggle-slider { position: absolute; top: 3px; left: 3px; width: 22px; height: 22px; background: white; border-radius: 50%; transition: left 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .toggle-switch.active .toggle-slider { left: 25px; }
        .volume-slider { width: 150px; height: 6px; border-radius: 3px; background: #e0e0e0; position: relative; cursor: pointer; }
        .volume-fill { height: 100%; background: var(--primary); border-radius: 3px; transition: width 0.2s; }
        .volume-value { font-size: 0.9rem; color: var(--primary); font-weight: bold; margin-left: 10px; min-width: 35px; }
        .test-sound-btn { padding: 8px 16px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem; font-weight: bold; }
        .test-sound-btn:active { transform: scale(0.95); }
        .danger-zone { border-top: 2px solid #ffebee; padding-top: 20px; margin-top: 20px; }
        .danger-btn { width: 100%; padding: 15px; background: #f44336; color: white; border: none; border-radius: 12px; font-size: 1rem; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .danger-btn:active { transform: scale(0.98); }
        .info-box { background: #e3f2fd; border-left: 4px solid var(--primary); padding: 12px; border-radius: 8px; margin: 15px 0; font-size: 0.9rem; color: #555; }
    </style>
</head>
<body>
    <div class="top-bar">
        <a href="index.html" class="btn-back">‚Üê</a>
        <div class="game-info">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
    </div>

    <div class="screen">
        <div class="settings-container">
            <!-- –ó–≤—É–∫ -->
            <div class="settings-section">
                <h2>üîä –ó–≤—É–∫</h2>
                
                <div class="setting-item">
                    <div class="setting-label">
                        –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
                        <small>–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤ –∏–≥—Ä–∞—Ö</small>
                    </div>
                    <div class="toggle-switch active" id="sound-toggle" onclick="toggleSound()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="setting-item" id="volume-setting">
                    <div class="setting-label">
                        –ì—Ä–æ–º–∫–æ—Å—Ç—å
                        <small>–£—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∑–≤—É–∫–æ–≤</small>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="volume-slider" id="volume-slider" onclick="setVolume(event)">
                            <div class="volume-fill" id="volume-fill"></div>
                        </div>
                        <span class="volume-value" id="volume-value">70%</span>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–≤—É–∫
                    </div>
                    <button class="test-sound-btn" onclick="testSound()">üîî –¢–µ—Å—Ç</button>
                </div>
            </div>

            <!-- –ò–≥—Ä–∞ -->
            <div class="settings-section">
                <h2>üéÆ –ò–≥—Ä–∞</h2>
                
                <div class="setting-item">
                    <div class="setting-label">
                        –í–∏–±—Ä–∞—Ü–∏—è
                        <small>–í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (—Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ)</small>
                    </div>
                    <div class="toggle-switch active" id="vibration-toggle" onclick="toggleVibration()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        –ê–Ω–∏–º–∞—Ü–∏–∏
                        <small>–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏</small>
                    </div>
                    <div class="toggle-switch active" id="animations-toggle" onclick="toggleAnimations()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="settings-section">
                <h2>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                
                <div class="info-box">
                    <strong>üéÆ –ù–µ–π—Ä–æ-–¢—Ä–µ–Ω–µ—Ä</strong><br>
                    –í–µ—Ä—Å–∏—è: 7.4 (Settings Update)<br>
                    –¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
                </div>
            </div>

            <!-- –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞ -->
            <div class="settings-section">
                <h2>‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h2>
                <div class="info-box" style="background: #fff3e0; border-left-color: #ff9800;">
                    ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.
                </div>
                <div class="danger-zone">
                    <button class="danger-btn" onclick="resetSettings()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="danger-btn" onclick="resetProgress()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        let settings = {
            soundEnabled: localStorage.getItem('soundEnabled') !== 'false',
            volume: parseInt(localStorage.getItem('soundVolume')) || 70,
            vibrationEnabled: localStorage.getItem('vibrationEnabled') !== 'false',
            animationsEnabled: localStorage.getItem('animationsEnabled') !== 'false'
        };

        function loadSettings() {
            // –ó–≤—É–∫
            const soundToggle = document.getElementById('sound-toggle');
            soundToggle.classList.toggle('active', settings.soundEnabled);
            
            // –ì—Ä–æ–º–∫–æ—Å—Ç—å
            updateVolumeDisplay();
            
            // –í–∏–±—Ä–∞—Ü–∏—è
            const vibrationToggle = document.getElementById('vibration-toggle');
            vibrationToggle.classList.toggle('active', settings.vibrationEnabled);
            
            // –ê–Ω–∏–º–∞—Ü–∏–∏
            const animationsToggle = document.getElementById('animations-toggle');
            animationsToggle.classList.toggle('active', settings.animationsEnabled);
        }

        function toggleSound() {
            settings.soundEnabled = !settings.soundEnabled;
            localStorage.setItem('soundEnabled', settings.soundEnabled);
            document.getElementById('sound-toggle').classList.toggle('active', settings.soundEnabled);
            if (settings.soundEnabled) testSound();
        }

        function setVolume(event) {
            const slider = document.getElementById('volume-slider');
            const rect = slider.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));
            settings.volume = Math.round(percentage);
            localStorage.setItem('soundVolume', settings.volume);
            updateVolumeDisplay();
            testSound();
        }

        function updateVolumeDisplay() {
            document.getElementById('volume-fill').style.width = settings.volume + '%';
            document.getElementById('volume-value').textContent = settings.volume + '%';
        }

        function testSound() {
            if (!settings.soundEnabled) return;
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 0.1);
            
            const volume = settings.volume / 100 * 0.3;
            gainNode.gain.setValueAtTime(volume, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.2);
        }

        function toggleVibration() {
            settings.vibrationEnabled = !settings.vibrationEnabled;
            localStorage.setItem('vibrationEnabled', settings.vibrationEnabled);
            document.getElementById('vibration-toggle').classList.toggle('active', settings.vibrationEnabled);
            if (settings.vibrationEnabled && navigator.vibrate) {
                navigator.vibrate(100);
            }
        }

        function toggleAnimations() {
            settings.animationsEnabled = !settings.animationsEnabled;
            localStorage.setItem('animationsEnabled', settings.animationsEnabled);
            document.getElementById('animations-toggle').classList.toggle('active', settings.animationsEnabled);
        }

        function resetSettings() {
            if (confirm('üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?')) {
                localStorage.removeItem('soundEnabled');
                localStorage.removeItem('soundVolume');
                localStorage.removeItem('vibrationEnabled');
                localStorage.removeItem('animationsEnabled');
                location.reload();
            }
        }

        function resetProgress() {
            if (confirm('‚ö†Ô∏è –£–î–ê–õ–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï?\n\n–≠—Ç–æ —É–¥–∞–ª–∏—Ç:\n- –í—Å–µ –º–æ–Ω–µ—Ç—ã\n- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä\n- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è\n- –ü–æ–∫—É–ø–∫–∏\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–õ–¨–ó–Ø –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
                if (confirm('‚ùó –í—ã —É–≤–µ—Ä–µ–Ω—ã? –ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ!')) {
                    localStorage.clear();
                    alert('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é...');
                    location.href = 'index.html';
                }
            }
        }

        loadSettings();
    </script>
</body>
</html>
