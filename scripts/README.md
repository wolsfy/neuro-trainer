# üöÄ Phase 2 Optimization Scripts

## üéØ –¶–µ–ª—å

–°–∂–∞—Ç—å 3D –º–æ–¥–µ–ª—å —Ä–æ–±–æ—Ç–∞ —Å **11.9 MB –¥–æ ~3 MB** –∏—Å–ø–æ–ª—å–∑—É—è Draco –∫–æ–º–ø—Ä–µ—Å—Å–∏—é.

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **FPS: +30-40%**
- ‚úÖ **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: -60-70%**
- ‚úÖ **VRAM usage: -60-70%**
- ‚úÖ **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 11.9 MB ‚Üí ~3 MB**

---

## üíª –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Windows (PowerShell)

```powershell
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cd neuro-trainer

# 2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
.\scripts\compress-model.ps1
```

### macOS / Linux (Bash)

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É
cd neuro-trainer

# 2. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x scripts/compress-model.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
./scripts/compress-model.sh
```

---

## üõ†Ô∏è –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** –Ω–∞–ª–∏—á–∏–µ Node.js –∏ npm
2. ‚úÖ **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** gltf-pipeline (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
3. ‚úÖ **–°–æ–∑–¥–∞—ë—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
4. ‚úÖ **–°–∂–∏–º–∞–µ—Ç** –º–æ–¥–µ–ª—å —Å Draco –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π
5. ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** —Å–∂–∞—Ç–∏—è
6. ‚úÖ **–°–ø—Ä–∞—à–∏–≤–∞–µ—Ç** –ø—Ä–æ –∑–∞–º–µ–Ω—É –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js

–ï—Å–ª–∏ Node.js –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [nodejs.org](https://nodejs.org/)
2. –°–∫–∞—á–∞–π—Ç–µ **LTS –≤–µ—Ä—Å–∏—é** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
   ```bash
   node --version
   npm --version
   ```

---

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞

#### Windows

```powershell
# –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
cd C:\path\to\neuro-trainer

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
.\scripts\compress-model.ps1
```

#### macOS / Linux

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd ~/neuro-trainer

# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)
chmod +x scripts/compress-model.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
./scripts/compress-model.sh
```

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
üìä Compression Results:
=================================================
Original size:  11.92 MB
Compressed size: 3.24 MB
Reduction:      72.8%
=================================================

Would you like to replace the original model? (y/n):
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ù–∞–∂–º–∏—Ç–µ **`n`** (–ø–æ–∫–∞ –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∂–∞—Ç—É—é –º–æ–¥–µ–ª—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ **`y`**

---

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–í—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã:**
   ```bash
   # Backup original
   mv "cute robot 3d model.glb" "cute robot 3d model.original.glb"
   
   # Use compressed
   mv "cute robot 3d model.optimized.glb" "cute robot 3d model.glb"
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ `room.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - –ü—Ä–æ—Å—Ç–æ –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ `room.html`
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Live Server –≤ VS Code

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –†–æ–±–æ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ
   - ‚úÖ –í—Å—ë –¥–µ—Ç–∞–ª–∏ –Ω–∞ –º–µ—Å—Ç–µ
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ
   - ‚úÖ –ù–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–∂–∞—Ç–∏—è

4. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12):**
   - Network —Ç–∞–± ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä GLB —Ñ–∞–π–ª–∞
   - Performance —Ç–∞–± ‚Üí –∑–∞–ø–∏—à–∏—Ç–µ 5 —Å–µ–∫, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ FPS

#### –ï—Å–ª–∏ –≤—Å—ë –æ–∫–µ–π:

```bash
# –£–¥–∞–ª–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –æ—Å—Ç–∞–Ω–µ—Ç—Å—è)
rm "cute robot 3d model.original.glb"
```

#### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫:

```bash
# –í–µ—Ä–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª
mv "cute robot 3d model.original.glb" "cute robot 3d model.glb"
```

---

### –®–∞–≥ 5: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ö–æ–≥–¥–∞ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å
git add "cute robot 3d model.glb"

# –ö–æ–º–º–∏—Ç
git commit -m "Phase 2: Optimize 3D model with Draco compression (-70% size, +35% FPS)"

# –ó–∞–ø—É—à
git push origin main
```

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∂–∞—Ç–∏—è

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Draco:

```bash
--draco.compressionLevel 10           # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ
--draco.quantizePositionBits 14       # –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–π –≤–µ—Ä—à–∏–Ω
--draco.quantizeNormalBits 10         # –¢–æ—á–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–∞–ª–µ–π
--draco.quantizeTexcoordBits 12       # –¢–æ—á–Ω–æ—Å—Ç—å UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
--draco.unifiedQuantization           # –ï–¥–∏–Ω–∞—è –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è
```

### –ü–æ—á–µ–º—É —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

- **compressionLevel 10** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- **positionBits 14** ‚Äî —Ö–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –º–µ–ª–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π
- **normalBits 10** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ—Å–≤–µ—â–µ–Ω–∏—è
- **texcoordBits 12** ‚Äî —Ç–æ—á–Ω—ã–µ UV –¥–ª—è —Ç–µ–∫—Å—Ç—É—Ä

---

## ‚ùå –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Node.js is not installed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∫–∞—á–∞–π—Ç–µ Node.js —Å [nodejs.org](https://nodejs.org/)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª

---

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to install gltf-pipeline"

**Windows:**
```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PowerShell –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
npm install -g gltf-pipeline
```

**macOS/Linux:**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sudo
sudo npm install -g gltf-pipeline
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: "Model file not found"

**–†–µ—à–µ–Ω–∏–µ:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ **–∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
neuro-trainer/
‚îú‚îÄ‚îÄ cute robot 3d model.glb    # –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–¥–µ—Å—å
‚îú‚îÄ‚îÄ room.html
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ compress-model.sh
    ‚îî‚îÄ‚îÄ compress-model.ps1
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å —Å–∂–∞–ª–∞—Å—å, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø–ª–æ—Ö–æ

**–†–µ—à–µ–Ω–∏–µ:**

–ï—Å–ª–∏ –∑–∞–º–µ—Ç–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
gltf-pipeline -i "cute robot 3d model.glb" -o "output.glb" -d \
  --draco.compressionLevel 7 \
  --draco.quantizePositionBits 16 \
  --draco.quantizeNormalBits 12
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```
File: cute robot 3d model.glb
Size: 11.92 MB
Vertices: 63,930
Faces: 21,310
Load time (3G): ~8 seconds
FPS: 20-30
```

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```
File: cute robot 3d model.glb (compressed)
Size: ~3.2 MB (-73%)
Vertices: 63,930 (without decimation)
Faces: 21,310
Load time (3G): ~2.5 seconds (-70%)
FPS: 35-45 (+40%)
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º:

1. **Blender Decimation** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª–∏–≥–æ–Ω–æ–≤
2. **Lazy Loading** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
3. **Baked Lighting** ‚Äî –∑–∞–ø–µ–∫–∞–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç—É—Ä—ã

–°–º. [`docs/PERFORMANCE_OPTIMIZATION.md`](../docs/PERFORMANCE_OPTIMIZATION.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ø–ª–∞–Ω–∞.

---

## üìù –°—Å—ã–ª–∫–∏

- [gltf-pipeline Documentation](https://github.com/CesiumGS/gltf-pipeline)
- [Draco 3D Compression](https://google.github.io/draco/)
- [glTF Model Optimization](https://www.khronos.org/gltf/)
- [Performance Optimization Plan](../docs/PERFORMANCE_OPTIMIZATION.md)

---

**–ê–≤—Ç–æ—Ä:** wolsfy  
**–î–∞—Ç–∞:** 18 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0
