<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>üêõ Debug - –ù–µ–π—Ä–æ –¢—Ä–µ–Ω–µ—Ä</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/mobile.css" />
  
  <script src="/neuro-trainer/js/theme-loader.js?v=2"></script>
  
  <style>
    body {
      padding: 0;
      margin: 0;
    }

    .debug-container {
      padding: 70px 20px 20px;
      max-width: 800px;
      margin: 0 auto;
    }

    .debug-section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .debug-section h2 {
      margin: 0 0 15px 0;
      font-size: 1.3rem;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .debug-info {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      max-height: 300px;
      overflow-y: auto;
    }

    .debug-info pre {
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .debug-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }

    .debug-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .debug-btn:active {
      transform: scale(0.95);
    }

    .debug-btn.danger {
      background: #f44336;
    }

    .debug-btn.success {
      background: #4CAF50;
    }

    .debug-btn.warning {
      background: #FF9800;
    }

    .debug-input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      align-items: center;
    }

    .debug-input {
      flex: 1;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1rem;
    }

    .debug-label {
      font-weight: bold;
      color: var(--text);
      margin-bottom: 8px;
      display: block;
    }

    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .status-indicator.active {
      background: #4CAF50;
    }

    .status-indicator.inactive {
      background: #f44336;
    }

    .data-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .data-row:last-child {
      border-bottom: none;
    }

    .data-key {
      font-weight: bold;
      color: #666;
    }

    .data-value {
      color: var(--text);
      font-family: 'Courier New', monospace;
    }

    .log-entry {
      padding: 5px 0;
      border-bottom: 1px solid #ddd;
    }

    .log-time {
      color: #999;
      font-size: 0.8rem;
    }

    .btn-back {
      font-size: 1.5rem;
      text-decoration: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: all 0.2s;
    }

    .btn-back:active {
      transform: scale(0.9);
      background: rgba(255,255,255,0.2);
    }
  </style>
</head>

<body>
  <div class="top-bar">
    <a href="index.html" class="btn-back">‚Üê</a>
    <div class="game-info">üêõ Debug Console</div>
    <div class="balance-badge">
      <span id="current-coins">0</span> üí∞
    </div>
  </div>

  <div class="debug-container">
    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="debug-section">
      <h2>üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã</h2>
      <div id="game-state" class="debug-info"></div>
      <button class="debug-btn" onclick="refreshData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∞–º–∏ -->
    <div class="debug-section">
      <h2>üí∞ –ú–æ–Ω–µ—Ç—ã</h2>
      <div class="debug-input-group">
        <input type="number" id="coins-input" class="debug-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç" value="1000">
        <button class="debug-btn success" onclick="addCoins()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
        <button class="debug-btn warning" onclick="setCoins()">‚úèÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      </div>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º -->
    <div class="debug-section">
      <h2>ü§ñ –°—Ç–∞—Ç—É—Å —Ä–æ–±–æ—Ç–∞</h2>
      <div class="debug-input-group">
        <label class="debug-label">–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</label>
        <input type="range" id="mood-input" class="debug-input" min="0" max="100" value="80">
        <span id="mood-value">80</span>%
      </div>
      <div class="debug-input-group">
        <label class="debug-label">–≠–Ω–µ—Ä–≥–∏—è:</label>
        <input type="range" id="energy-input" class="debug-input" min="0" max="100" value="70">
        <span id="energy-value">70</span>%
      </div>
      <div class="debug-input-group">
        <label class="debug-label">–ì–æ–ª–æ–¥:</label>
        <input type="range" id="hunger-input" class="debug-input" min="0" max="100" value="60">
        <span id="hunger-value">60</span>%
      </div>
      <div class="debug-input-group">
        <label class="debug-label">–£—Ä–æ–≤–µ–Ω—å:</label>
        <input type="number" id="level-input" class="debug-input" min="1" max="100" value="1">
      </div>
      <button class="debug-btn success" onclick="applyRobotStatus()">‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º -->
    <div class="debug-section">
      <h2>üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
      <div class="debug-controls">
        <button class="debug-btn success" onclick="unlockAllGames()">üéÆ –û—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –∏–≥—Ä—ã</button>
        <button class="debug-btn success" onclick="unlockAllAchievements()">üèÜ –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="debug-btn success" onclick="maxStats()">üìä –ú–∞–∫—Å. —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        <button class="debug-btn warning" onclick="resetProgress()">üîÑ –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
      </div>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–æ–º -->
    <div class="debug-section">
      <h2>üé® –î–µ–∫–æ—Ä –∏ –æ–¥–µ–∂–¥–∞</h2>
      <div class="debug-controls">
        <button class="debug-btn success" onclick="unlockAllDecor()">üé® –í–µ—Å—å –¥–µ–∫–æ—Ä</button>
        <button class="debug-btn success" onclick="unlockAllClothes()">üëï –í—Å—è –æ–¥–µ–∂–¥–∞</button>
        <button class="debug-btn warning" onclick="resetDecor()">üîÑ –°–±—Ä–æ—Å –¥–µ–∫–æ—Ä–∞</button>
      </div>
    </div>

    <!-- LocalStorage -->
    <div class="debug-section">
      <h2>üíæ LocalStorage</h2>
      <div id="localStorage-data" class="debug-info"></div>
      <div class="debug-controls">
        <button class="debug-btn" onclick="exportData()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
        <button class="debug-btn" onclick="importData()">üì• –ò–º–ø–æ—Ä—Ç</button>
        <button class="debug-btn danger" onclick="clearAllData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
      </div>
    </div>

    <!-- –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="debug-section">
      <h2>üìù –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π</h2>
      <div id="action-log" class="debug-info">
        <div class="log-entry">
          <span class="log-time">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      </div>
      <button class="debug-btn warning" onclick="clearLog()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    let actionLog = [];

    function log(message) {
      const timestamp = new Date().toLocaleTimeString('ru-RU');
      actionLog.unshift({ time: timestamp, message });
      if (actionLog.length > 50) actionLog.pop();
      updateLog();
    }

    function updateLog() {
      const logEl = document.getElementById('action-log');
      logEl.innerHTML = actionLog.map(entry => 
        `<div class="log-entry"><span class="log-time">${entry.time}</span> - ${entry.message}</div>`
      ).join('');
    }

    function clearLog() {
      actionLog = [];
      updateLog();
      log('–õ–æ–≥ –æ—á–∏—â–µ–Ω');
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    function refreshData() {
      const gameState = {
        coins: parseInt(localStorage.getItem('neuroCoins')) || 0,
        robotMood: parseInt(localStorage.getItem('robotMood')) || 80,
        robotEnergy: parseInt(localStorage.getItem('robotEnergy')) || 70,
        robotHunger: parseInt(localStorage.getItem('robotHunger')) || 60,
        robotLevel: parseInt(localStorage.getItem('robotLevel')) || 1,
        totalGamesPlayed: parseInt(localStorage.getItem('totalGamesPlayed')) || 0,
        highScores: JSON.parse(localStorage.getItem('highScores') || '{}'),
        achievements: JSON.parse(localStorage.getItem('achievements') || '[]'),
        ownedDecor: JSON.parse(localStorage.getItem('ownedDecor') || '[]'),
        unlockedGames: JSON.parse(localStorage.getItem('unlockedGames') || '[]')
      };

      document.getElementById('game-state').innerHTML = '<pre>' + JSON.stringify(gameState, null, 2) + '</pre>';
      document.getElementById('current-coins').textContent = gameState.coins;

      // LocalStorage
      const allData = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        allData[key] = localStorage.getItem(key);
      }
      document.getElementById('localStorage-data').innerHTML = '<pre>' + JSON.stringify(allData, null, 2) + '</pre>';

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–æ–≤
      document.getElementById('mood-input').value = gameState.robotMood;
      document.getElementById('energy-input').value = gameState.robotEnergy;
      document.getElementById('hunger-input').value = gameState.robotHunger;
      document.getElementById('level-input').value = gameState.robotLevel;
      document.getElementById('mood-value').textContent = gameState.robotMood;
      document.getElementById('energy-value').textContent = gameState.robotEnergy;
      document.getElementById('hunger-value').textContent = gameState.robotHunger;

      log('–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
    }

    // –ú–æ–Ω–µ—Ç—ã
    function addCoins() {
      const amount = parseInt(document.getElementById('coins-input').value) || 0;
      const current = parseInt(localStorage.getItem('neuroCoins')) || 0;
      localStorage.setItem('neuroCoins', current + amount);
      refreshData();
      log(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç`);
    }

    function setCoins() {
      const amount = parseInt(document.getElementById('coins-input').value) || 0;
      localStorage.setItem('neuroCoins', amount);
      refreshData();
      log(`–ú–æ–Ω–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ ${amount}`);
    }

    // –†–æ–±–æ—Ç
    function applyRobotStatus() {
      const mood = document.getElementById('mood-input').value;
      const energy = document.getElementById('energy-input').value;
      const hunger = document.getElementById('hunger-input').value;
      const level = document.getElementById('level-input').value;

      localStorage.setItem('robotMood', mood);
      localStorage.setItem('robotEnergy', energy);
      localStorage.setItem('robotHunger', hunger);
      localStorage.setItem('robotLevel', level);
      localStorage.setItem('robotLastVisit', Date.now());

      refreshData();
      log(`–°—Ç–∞—Ç—É—Å —Ä–æ–±–æ—Ç–∞ –æ–±–Ω–æ–≤–ª—ë–Ω: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ${mood}%, –≠–Ω–µ—Ä–≥–∏—è ${energy}%, –ì–æ–ª–æ–¥ ${hunger}%, –£—Ä–æ–≤–µ–Ω—å ${level}`);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–∞–π–¥–µ—Ä–æ–≤
    document.getElementById('mood-input').addEventListener('input', (e) => {
      document.getElementById('mood-value').textContent = e.target.value;
    });
    document.getElementById('energy-input').addEventListener('input', (e) => {
      document.getElementById('energy-value').textContent = e.target.value;
    });
    document.getElementById('hunger-input').addEventListener('input', (e) => {
      document.getElementById('hunger-value').textContent = e.target.value;
    });

    // –ò–≥—Ä—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    function unlockAllGames() {
      const allGames = ['memory', 'math', 'words', 'reaction', 'attention', 'logic'];
      localStorage.setItem('unlockedGames', JSON.stringify(allGames));
      refreshData();
      log('–í—Å–µ –∏–≥—Ä—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã');
    }

    function unlockAllAchievements() {
      const achievements = [];
      for (let i = 1; i <= 20; i++) {
        achievements.push(`achievement-${i}`);
      }
      localStorage.setItem('achievements', JSON.stringify(achievements));
      refreshData();
      log('–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã');
    }

    function maxStats() {
      localStorage.setItem('totalGamesPlayed', '1000');
      localStorage.setItem('totalScore', '100000');
      localStorage.setItem('highScores', JSON.stringify({
        memory: 1000,
        math: 1000,
        words: 1000,
        reaction: 1000,
        attention: 1000,
        logic: 1000
      }));
      refreshData();
      log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ –º–∞–∫—Å–∏–º—É–º');
    }

    function resetProgress() {
      if (!confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) return;
      
      localStorage.removeItem('totalGamesPlayed');
      localStorage.removeItem('totalScore');
      localStorage.removeItem('highScores');
      localStorage.removeItem('achievements');
      localStorage.removeItem('unlockedGames');
      
      refreshData();
      log('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω');
    }

    // –î–µ–∫–æ—Ä
    function unlockAllDecor() {
      const allDecor = [
        'poster-star', 'poster-brain', 'poster-rocket', 'poster-trophy', 'poster-books', 'poster-bulb',
        'furniture-plant', 'furniture-sofa', 'furniture-desk', 'furniture-bookshelf'
      ];
      localStorage.setItem('ownedDecor', JSON.stringify(allDecor));
      refreshData();
      log('–í–µ—Å—å –¥–µ–∫–æ—Ä —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
    }

    function unlockAllClothes() {
      const allClothes = [
        'glasses', 'hat', 'bow', 'crown', 'hoodie', 'jacket', 'suit', 'tshirt'
      ];
      localStorage.setItem('ownedClothes', JSON.stringify(allClothes));
      refreshData();
      log('–í—Å—è –æ–¥–µ–∂–¥–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞');
    }

    function resetDecor() {
      localStorage.setItem('ownedDecor', JSON.stringify(['poster-star', 'furniture-plant']));
      localStorage.setItem('equippedDecor', JSON.stringify({wall: ['poster-star'], floor: ['furniture-plant']}));
      refreshData();
      log('–î–µ–∫–æ—Ä —Å–±—Ä–æ—à–µ–Ω –¥–æ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è');
    }

    // LocalStorage
    function exportData() {
      const data = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        data[key] = localStorage.getItem(key);
      }
      const json = JSON.stringify(data, null, 2);
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `neuro-trainer-backup-${Date.now()}.json`;
      a.click();
      log('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã');
    }

    function importData() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const data = JSON.parse(event.target.result);
            Object.keys(data).forEach(key => {
              localStorage.setItem(key, data[key]);
            });
            refreshData();
            log('–î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã');
            alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
          } catch (error) {
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö');
            log('–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: ' + error.message);
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    function clearAllData() {
      if (!confirm('‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) return;
      if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –º–æ–Ω–µ—Ç—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã!')) return;
      
      localStorage.clear();
      refreshData();
      log('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã');
      alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞.');
      setTimeout(() => location.reload(), 1000);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('DOMContentLoaded', () => {
      refreshData();
      log('Debug –∫–æ–Ω—Å–æ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    });
  </script>
</body>
</html>